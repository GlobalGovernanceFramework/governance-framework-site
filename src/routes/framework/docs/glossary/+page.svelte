<!-- src/routes/framework/docs/glossary/+page.svelte -->
<script>
  import { page } from '$app/stores';
  import { t, locale } from '$lib/i18n';
  import FrameworkSidebar from '$lib/components/FrameworkSidebar.svelte';

  // Direct inclusion of glossary data
  // You'll paste your actual glossaryData here
  const glossaryData = {
    en: {
      "title": "Glossary",
      "intro": "This glossary provides definitions for key terms used throughout the Global Governance Framework. Each term includes a category emoji to help identify its primary domain. Use the filters below to explore terms by category.",
      "categories": {
        "title": "Filter by Category",
        "all": "All Terms",
        "process": "Process & Methods",
        "reflection": "Reflection & Learning",
        "framework": "Frameworks & Models",
        "ai": "AI & Automation",
        "tech": "Technology & Systems",
        "digital": "Digital & Virtual",
        "community": "Community & Participation",
        "youth": "Youth & Future Generations",
        "indigenous": "Indigenous & Traditional",
        "justice": "Justice & Rights",
        "ethics": "Ethics & Values",
        "global": "Global & Planetary",
        "structure": "Structure & Design",
        "metrics": "Metrics & Evaluation",
        "connection": "Connection & Networks",
        "financial": "Financial & Resources",
        "longterm": "Long-term & Future",
        "growth": "Growth & Development",
        "space": "Space & Extraterrestrial",
        "spiritual": "Spiritual & Consciousness"
      },
      "alphabet": {
        "title": "Jump to Letter"
      },
      "example": "Example in context",
      "related": "Related terms",
      "contribute": {
        "title": "Contribute to this Glossary",
        "description": "This glossary is continually evolving. If you'd like to suggest a new term or improvement, please",
        "contact": "contact us"
      },
      "terms": {
        "Adaptive Evaluation": {
          "definition": "A real-time assessment method that evolves alongside projects, prioritizing learning over static metrics.",
          "example": "A climate resilience program uses adaptive evaluation to adjust its indicators as community understanding of resilience evolves through implementation."
        },
        "Gamified Feedback": {
          "definition": "Using game mechanics (badges, leaderboards, challenges) to incentivize participation in governance processes.",
          "example": "A municipal government created a digital platform where citizens earn points for submitting ideas, voting on proposals, and attending public meetings."
        },
        "Human-in-the-Loop": {
          "definition": "Ensuring humans retain final authority over AI-assisted decisions, especially in governance contexts.",
          "example": "The city's planning department uses AI to generate zoning recommendations, but requires human planners to review and approve all suggestions before implementation."
        },
        "Interoperability APIs": {
          "definition": "Technical standards enabling governance tools to share data across platforms and jurisdictions.",
          "example": "The regional climate initiative created APIs that allow different cities' environmental monitoring systems to share data seamlessly, despite using different software."
        },
        "Legitimacy Recognition Systems": {
          "definition": "Public ratings and certification systems assessing governance alignment with shared values and ethical principles.",
          "example": "The Global Indigenous Council developed a recognition system that rates government policies based on their respect for traditional knowledge and self-determination."
        },
        "Meta-Governance": {
          "definition": "Frameworks for coordinating governance systems across domains, jurisdictions, and levels to enable collaboration without centralization.",
          "example": "The Baltic Sea Commission established meta-governance protocols that allow eight countries to coordinate environmental protection while maintaining their unique governance systems."
        },
        "Nested Legitimacy": {
          "definition": "A condition where local decisions align with broader governance frameworks without coercion, maintaining autonomy while ensuring compatibility.",
          "example": "Indigenous forest management practices were recognized as legitimate within national conservation frameworks, allowing communities to maintain traditional governance while fulfilling broader sustainability goals."
        },
        "Participatory Budgeting": {
          "definition": "Processes enabling communities to directly allocate portions of public funds through democratic deliberation and voting.",
          "example": "Porto Alegre, Brazil pioneered participatory budgeting where citizens collectively decide how to spend 20% of the municipal infrastructure budget through neighborhood assemblies and city-wide votes."
        },
        "Reflexive Cycle": {
          "definition": "Structured self-assessment processes with audit trails, ensuring governance systems continuously learn and improve from their operations.",
          "example": "The Urban Climate Alliance built quarterly reflexive cycles into their governance, documenting decisions, outcomes, and lessons learned to improve future policy-making."
        },
        "Transgenerational KPIs": {
          "definition": "Metrics and indicators designed to evaluate the long-term impacts of current decisions on future generations and planetary health.",
          "example": "The Finnish Parliament established transgenerational KPIs for all major infrastructure projects, requiring assessment of impacts over 100-year timeframes."
        },
        "Value-Sensitive Design": {
          "definition": "Methodologies for embedding ethical principles and human values directly into the development of technologies and governance systems.",
          "example": "The public health data system was developed using value-sensitive design to ensure privacy, equity, and accessibility were built into its architecture, not added as afterthoughts."
        },
        "Youth-Led Design": {
          "definition": "Governance tools and processes co-created by young people, ensuring intergenerational perspectives shape systems that will affect their futures.",
          "example": "Finland's Climate Council includes a Youth Panel with decision-making authority that co-designs climate policies alongside traditional experts and government officials."
        },
        "Epistemic Justice": {
          "definition": "Fair recognition of diverse knowledge systems and ways of knowing, ensuring that no single epistemology (Western, scientific, etc.) dominates governance frameworks to the exclusion of others.",
          "example": "The Arctic Council incorporates both scientific research and Indigenous oral histories as equally valid sources of knowledge in climate policy deliberations."
        },
        "Pluriversal Governance": {
          "definition": "Governance approaches that recognize multiple valid worldviews and ontologies, enabling different civilizational perspectives to coexist and collaborate without requiring assimilation to a single dominant framework.",
          "example": "New Zealand's legal recognition of the Whanganui River as a legal person with rights represents a pluriversal approach that incorporates MƒÅori understandings of nature alongside Western legal concepts."
        },
        "Digital Commons": {
          "definition": "Collectively managed digital resources that are governed as shared assets rather than private property, ensuring equitable access, participatory development, and protection from enclosure or monopolization.",
          "example": "The Linux operating system represents a digital commons, developed and maintained by a global community with governance structures ensuring it remains freely available while evolving through distributed contribution."
        },
        "Non-Linear Decision Protocols": {
          "definition": "Governance approaches that operate through cyclical, relational, or recursive processes rather than linear progression, often based on Indigenous or non-Western decision traditions.",
          "example": "The Haudenosaunee Confederacy's consensus process involves multiple cycles of proposal, deliberation, and consultation with home communities before decisions are finalized, contrasting with Western parliamentary voting sequences."
        },
        "Intergenerational Trusteeship": {
          "definition": "Governance structures that formally represent the interests of future generations in current decision-making, ensuring long-term impacts are prioritized alongside present concerns.",
          "example": "Wales' Future Generations Commissioner has legal authority to review policies for their impact on generations not yet born, with the power to require changes to protect their interests."
        },
        "Governance Sandboxes": {
          "definition": "Protected spaces where innovative governance approaches can be tested with relaxed regulatory constraints but heightened monitoring, allowing experimentation while containing potential harms.",
          "example": "Finland's AI Governance Sandbox allows municipalities to test new algorithmic decision systems under close ethical oversight but with temporary exemptions from certain regulatory requirements."
        },
        "Cosmo-Local Production": {
          "definition": "Economic model where knowledge, designs, and expertise are shared globally while physical production remains local, combining the efficiency of global coordination with the resilience of distributed manufacturing.",
          "example": "The OSPRI (Open Source Pandemic Response Initiative) shares globally-developed ventilator designs that can be locally manufactured using available materials and adapted to local contexts during health emergencies."
        },
        "Polycentric Coordination": {
          "definition": "Governance structures with multiple independent but overlapping centers of decision-making, enabling both autonomy and coordination across different scales and domains without requiring central control.",
          "example": "Water management in the Netherlands operates through polycentric coordination, with local water boards, regional authorities, national agencies, and EU frameworks all governing different aspects of water systems while maintaining coherence through coordination mechanisms."
        },
        "Cosmic Commons": {
          "definition": "The shared heritage of cosmic resources and environments, governed as a commons for the benefit of all humanity rather than being subject to national or corporate appropriation.",
          "example": "The Outer Space Treaty established the Moon and other celestial bodies as cosmic commons, declaring that exploration and use 'shall be carried out for the benefit and in the interests of all countries' and not subject to national appropriation."
        },
        "Non-Terrestrial Governance": {
          "definition": "Governance systems designed for space environments, satellites, or planetary settlements that operate outside Earth's jurisdictions while maintaining alignment with core ethical principles.",
          "example": "The Mars Settlement Charter established a rotational council with members from all habitat domes, creating a non-terrestrial governance model adapted to the unique constraints and needs of Martian settlements."
        },
        "Consciousness-Informed Governance": {
          "definition": "Governance approaches that explicitly incorporate awareness practices, inner development, and consciousness exploration into their structures and processes.",
          "example": "Bhutan's Gross National Happiness Commission includes meditation practitioners who evaluate policy impacts on mental well-being and consciousness development alongside material metrics."
        },
        "Contemplative Governance": {
          "definition": "Decision-making processes that integrate periods of silence, reflection, and contemplative practice to enhance wisdom, reduce reactivity, and access deeper collective intelligence.",
          "example": "The Montreal Climate Council begins each meeting with a shared contemplative practice and includes structured silence before critical decisions, reporting improved outcomes and reduced polarization."
        }
      }
    },
    sv: {
      "title": "Ordlista",
      "intro": "Denna ordlista inneh√•ller definitioner av viktiga begrepp som anv√§nds i Ramverket f√∂r Globalt Styre. Varje begrepp har en kategori-emoji f√∂r att identifiera dess huvudsakliga omr√•de. Anv√§nd filtren nedan f√∂r att utforska begrepp efter kategori.",
      "categories": {
        "title": "Filtrera efter kategori",
        "all": "Alla begrepp",
        "process": "Processer & Metoder",
        "reflection": "Reflektion & L√§rande",
        "framework": "Ramverk & Modeller",
        "ai": "AI & Automation",
        "tech": "Teknik & System",
        "digital": "Digitalt & Virtuellt",
        "community": "Gemenskap & Deltagande",
        "youth": "Ungdom & Framtida Generationer",
        "indigenous": "Urfolk & Traditionellt",
        "justice": "R√§ttvisa & R√§ttigheter",
        "ethics": "Etik & V√§rderingar",
        "global": "Globalt & Planet√§rt",
        "structure": "Struktur & Design",
        "metrics": "M√§tetal & Utv√§rdering",
        "connection": "Anslutning & N√§tverk",
        "financial": "Finansiellt & Resurser",
        "longterm": "L√•ngsiktigt & Framtid",
        "growth": "Tillv√§xt & Utveckling",
        "space": "Rymd & Utomjordiskt",
        "spiritual": "Andligt & Medvetande"
      },
      "alphabet": {
        "title": "Hoppa till bokstav"
      },
      "example": "Exempel i kontext",
      "related": "Relaterade begrepp",
      "contribute": {
        "title": "Bidra till denna ordlista",
        "description": "Denna ordlista utvecklas kontinuerligt. Om du vill f√∂resl√• ett nytt begrepp eller f√∂rb√§ttring, v√§nligen",
        "contact": "kontakta oss"
      },
      "terms": {
        "Adaptive Evaluation": {
          "definition": "En metod f√∂r utv√§rdering i realtid som utvecklas parallellt med projekt, d√§r l√§rande prioriteras framf√∂r statiska m√•tt.",
          "example": "Ett klimatresiliensprogram anv√§nder adaptiv utv√§rdering f√∂r att justera sina indikatorer i takt med att samh√§llets f√∂rst√•else f√∂r resiliens utvecklas under genomf√∂randet."
        },
        "Gamified Feedback Loops": {
          "definition": "Att anv√§nda spelmekanismer (m√§rken, topplistor, utmaningar) f√∂r att uppmuntra deltagande i styrprocesser.",
          "example": "En kommunal regering skapade en digital plattform d√§r medborgare tj√§nar po√§ng f√∂r att l√§mna in id√©er, r√∂sta p√• f√∂rslag och delta i offentliga m√∂ten."
        },
        "Human-in-the-Loop": {
          "definition": "Att s√§kerst√§lla att m√§nniskor har sista ordet i AI-assisterade beslut, s√§rskilt i styrsammanhang.",
          "example": "Stadsplaneringsavdelningen anv√§nder AI f√∂r att generera zonindelningsf√∂rslag, men kr√§ver att m√§nskliga planerare granskar och godk√§nner alla f√∂rslag innan de implementeras."
        },
        "Interoperability APIs": {
          "definition": "Tekniska standarder som g√∂r det m√∂jligt f√∂r styrverktyg att dela data √∂ver plattformar och jurisdiktioner.",
          "example": "Det regionala klimatsamarbetet skapade API:er som g√∂r det m√∂jligt f√∂r olika st√§ders milj√∂√∂vervakningssystem att dela data s√∂ml√∂st, trots att de anv√§nder olika mjukvaror."
        },
        "Legitimacy Recognition Systems": {
          "definition": "Offentliga betygs- och certifieringssystem som bed√∂mer hur v√§l styrning st√§mmer √∂verens med gemensamma v√§rderingar och etiska principer.",
          "example": "Det Globala R√•det f√∂r Ursprungsbefolkningar utvecklade ett erk√§nnandesystem som betygs√§tter statliga policyer baserat p√• respekt f√∂r traditionell kunskap och sj√§lvbest√§mmande."
        },
        "Meta-Governance": {
          "definition": "Ramverk f√∂r att samordna styrsystem √∂ver omr√•den, jurisdiktioner och niv√•er f√∂r att m√∂jligg√∂ra samarbete utan centralisering.",
          "example": "Baltiska havskommissionen etablerade metastyrningsprotokoll som g√∂r det m√∂jligt f√∂r √•tta l√§nder att samordna milj√∂skydd samtidigt som de beh√•ller sina unika styrsystem."
        },
        "Nested Legitimacy": {
          "definition": "Ett tillst√•nd d√§r lokala beslut √§r i linje med bredare styrningsramverk utan tv√•ng, vilket bevarar autonomi samtidigt som kompatibilitet s√§kerst√§lls.",
          "example": "Ursprungsbefolkningens skogsf√∂rvaltning erk√§ndes som legitim inom nationella bevaranderamverk, vilket m√∂jliggjorde traditionell styrning i linje med bredare h√•llbarhetsm√•l."
        },
        "Participatory Budgeting": {
          "definition": "Processer som g√∂r det m√∂jligt f√∂r samh√§llen att direkt f√∂rdela delar av offentliga medel genom demokratisk √∂verl√§ggning och omr√∂stning.",
          "example": "Porto Alegre i Brasilien var pionj√§r inom deltagandebudgetering d√§r medborgare kollektivt beslutar hur 20% av stadens infrastrukturbudget ska anv√§ndas genom kvartersf√∂rsamlingar och stads√∂vergripande omr√∂stningar."
        },
        "Reflexive Cycle": {
          "definition": "Strukturerade sj√§lvutv√§rderingsprocesser med sp√•rbar dokumentation, som s√§kerst√§ller att styrsystem kontinuerligt l√§r sig och f√∂rb√§ttras genom sin verksamhet.",
          "example": "Urban Climate Alliance inf√∂rde kvartalsvisa reflexiva cykler i sitt styrsystem, d√§r beslut, resultat och l√§rdomar dokumenteras f√∂r att f√∂rb√§ttra framtida policyarbete."
        },
        "Transgenerational KPIs": {
          "definition": "M√•tt och indikatorer utformade f√∂r att utv√§rdera l√•ngsiktiga effekter av dagens beslut p√• framtida generationer och planetens h√§lsa.",
          "example": "Finlands riksdag inf√∂rde transgenerationella KPI:er f√∂r alla st√∂rre infrastrukturprojekt, d√§r effekterna ska bed√∂mas √∂ver en tidsperiod p√• 100 √•r."
        },
        "Value-Sensitive Design": {
          "definition": "Metoder f√∂r att integrera etiska principer och m√§nskliga v√§rderingar direkt i utvecklingen av teknik och styrsystem.",
          "example": "Det offentliga h√§lsodatasytemet utvecklades med v√§rdebaserad design f√∂r att s√§kerst√§lla att integritet, j√§mlikhet och tillg√§nglighet byggdes in i arkitekturen ‚Äì inte tillf√∂rdes i efterhand."
        },
        "Youth-Led Design": {
          "definition": "Styrverktyg och processer som samskapas av unga m√§nniskor, f√∂r att s√§kerst√§lla att generations√∂vergripande perspektiv formar systemen som p√•verkar deras framtid.",
          "example": "Finlands Klimatr√•d inkluderar en ungdomspanel med beslutsmakt som samskapar klimatpolicy tillsammans med traditionella experter och myndigheter."
        },
        "Epistemic Justice": {
          "definition": "R√§ttvist erk√§nnande av olika kunskapssystem och s√§tt att veta, som s√§kerst√§ller att ingen enskild epistemologi (v√§sterl√§ndsk, vetenskaplig, etc.) dominerar styrningsramverk p√• bekostnad av andra.",
          "example": "Arktiska r√•det inf√∂rlivar b√•de vetenskaplig forskning och urfolks muntliga historier som lika giltiga kunskapsk√§llor i klimatpolitiska √∂verl√§ggningar."
        },
        "Pluriversal Governance": {
          "definition": "Styrningsmetoder som erk√§nner flera giltiga v√§rlds√•sk√•dningar och ontologier, vilket m√∂jligg√∂r att olika civilisatoriska perspektiv kan samexistera och samarbeta utan att kr√§va assimilering till ett enda dominerande ramverk.",
          "example": "Nya Zeelands juridiska erk√§nnande av Whanganui-floden som en juridisk person med r√§ttigheter representerar ett pluriversellt tillv√§gag√•ngss√§tt som inf√∂rlivar maoriernas f√∂rst√•else av naturen tillsammans med v√§sterl√§ndska juridiska begrepp."
        },
        "Digital Commons": {
          "definition": "Kollektivt f√∂rvaltade digitala resurser som styrs som gemensamma tillg√•ngar snarare √§n privat egendom, vilket s√§kerst√§ller r√§ttvis tillg√•ng, deltagandebaserad utveckling och skydd mot inh√§gnad eller monopolisering.",
          "example": "Operativsystemet Linux representerar digitala allm√§nningar, utvecklat och underh√•llet av en global gemenskap med styrningsstrukturer som s√§kerst√§ller att det f√∂rblir fritt tillg√§ngligt samtidigt som det utvecklas genom distribuerade bidrag."
        },
        "Non-Linear Decision Protocols": {
          "definition": "Styrningsmetoder som fungerar genom cykliska, relationella eller rekursiva processer snarare √§n linj√§r progression, ofta baserade p√• urfolks eller icke-v√§sterl√§ndska beslutstraditioner.",
          "example": "Haudenosaunee-konfederationens konsensusprocess involverar flera cykler av f√∂rslag, √∂verl√§ggning och samr√•d med hemmasamh√§llen innan beslut slutf√∂rs, i kontrast till v√§sterl√§ndska parlamentariska r√∂stningssekvenser."
        },
        "Intergenerational Trusteeship": {
          "definition": "Styrningsstrukturer som formellt representerar framtida generationers intressen i nuvarande beslutsfattande, vilket s√§kerst√§ller att l√•ngsiktiga effekter prioriteras tillsammans med nuvarande bekymmer.",
          "example": "Wales kommission√§r f√∂r framtida generationer har juridisk beh√∂righet att granska politik f√∂r dess p√•verkan p√• generationer som √§nnu inte √§r f√∂dda, med befogenhet att kr√§va f√∂r√§ndringar f√∂r att skydda deras intressen."
        },
        "Governance Sandboxes": {
          "definition": "Skyddade utrymmen d√§r innovativa styrningsmetoder kan testas med l√§ttade regleringsrestriktioner men f√∂rh√∂jd √∂vervakning, vilket m√∂jligg√∂r experimenterande samtidigt som potentiella skador begr√§nsas.",
          "example": "Finlands AI-styrningssandl√•da till√•ter kommuner att testa nya algoritmiska beslutssystem under noggrann etisk √∂vervakning men med tillf√§lliga undantag fr√•n vissa regulatoriska krav."
        },
        "Cosmo-Local Production": {
          "definition": "Ekonomisk modell d√§r kunskap, design och expertis delas globalt medan fysisk produktion f√∂rblir lokal, vilket kombinerar effektiviteten hos global samordning med motst√•ndskraften hos distribuerad tillverkning.",
          "example": "OSPRI (Open Source Pandemic Response Initiative) delar globalt utvecklade ventilatordesigner som kan tillverkas lokalt med tillg√§ngliga material och anpassas till lokala sammanhang under h√§lson√∂dsituationer."
        },
        "Polycentric Coordination": {
          "definition": "Styrningsstrukturer med flera oberoende men √∂verlappande beslutscentra, vilket m√∂jligg√∂r b√•de autonomi och samordning √∂ver olika skalor och dom√§ner utan att kr√§va central kontroll.",
          "example": "Vattenhantering i Nederl√§nderna fungerar genom polycentrisk samordning, med lokala vattenstyrelser, regionala myndigheter, nationella organ och EU-ramverk som alla styr olika aspekter av vattensystem samtidigt som de uppr√§tth√•ller sammanhang genom samordningsmekanismer."
        },
        "Cosmic Commons": {
          "definition": "Det gemensamma arvet av kosmiska resurser och milj√∂er, som f√∂rvaltas som allm√§nningar till f√∂rm√•n f√∂r hela m√§nskligheten snarare √§n att vara f√∂rem√•l f√∂r nationellt eller f√∂retagsm√§ssigt till√§gnande.",
          "example": "Yttre rymdf√∂rdragets etablerade m√•nen och andra himlakroppar som kosmiska allm√§nningar, med f√∂rklaringen att utforskning och anv√§ndning 'ska genomf√∂ras till f√∂rm√•n f√∂r och i alla l√§nders intresse' och inte vara f√∂rem√•l f√∂r nationellt till√§gnande."
        },
        "Non-Terrestrial Governance": {
          "definition": "Styrningssystem utformade f√∂r rymdmilj√∂er, satelliter eller planet√§ra bos√§ttningar som fungerar utanf√∂r jordens jurisdiktioner samtidigt som de uppr√§tth√•ller anpassning till grundl√§ggande etiska principer.",
          "example": "Mars-bos√§ttningens stadga etablerade ett rotationsr√•d med medlemmar fr√•n alla habitatkupoler, vilket skapade en icke-terrestrisk styrningsmodell anpassad till de unika begr√§nsningarna och behoven hos marsiska bos√§ttningar."
        },
        "Consciousness-Informed Governance": {
          "definition": "Styrningsmetoder som uttryckligen integrerar medvetenhetspraxis, inre utveckling och utforskning av medvetandet i sina strukturer och processer.",
          "example": "Bhutans kommission f√∂r bruttonationell lycka inkluderar meditationsut√∂vare som utv√§rderar policyeffekter p√• mentalt v√§lbefinnande och medvetandeutveckling tillsammans med materiella m√§tv√§rden."
        },
        "Contemplative Governance": {
          "definition": "Beslutsprocesser som integrerar perioder av tystnad, reflektion och kontemplativ praktik f√∂r att f√∂rb√§ttra visdom, minska reaktivitet och f√• tillg√•ng till djupare kollektiv intelligens.",
          "example": "Montreals klimatr√•d b√∂rjar varje m√∂te med en gemensam kontemplativ √∂vning och inkluderar strukturerad tystnad f√∂re kritiska beslut, och rapporterar f√∂rb√§ttrade resultat och minskad polarisering."
        }
      }
    }
  };
  
  // Category filter state
  let selectedCategory = null;
  
  // Define category mapping
  const categories = {
    process: 'üîÑ',
    reflection: 'üîç',
    framework: 'üß©',
    ai: 'ü§ñ',
    tech: 'üîå',
    digital: 'üíª',
    community: 'üë•',
    youth: 'üßí',
    indigenous: 'üåø',
    justice: '‚öñÔ∏è',
    ethics: '‚ù§Ô∏è',
    global: 'üåç',
    structure: 'üèõÔ∏è',
    metrics: 'üìä',
    connection: 'üîó',
    financial: 'üí∞',
    longterm: '‚è≥',
    growth: 'üå±',
    space: 'üöÄ',
    spiritual: '‚ú®'
  };
  
  // Define base term structures (without translations)
  const baseTerms = {
    en: [
      {
        name: "Adaptive Evaluation",
        emoji: "üîÑ",
        category: "process",
        related: ["Reflexive Cycle", "Developmental Evaluation"]
      },
      {
        name: "Gamified Feedback Loops",
        emoji: "üéÆ",
        category: "digital",
        related: ["Participatory Budgeting", "Youth-Led Design"]
      },
      {
        name: "Human-in-the-Loop",
        emoji: "ü§ñ",
        category: "ai",
        related: ["Ethical AI", "Value-Sensitive Design"]
      },
      {
        name: "Interoperability APIs",
        emoji: "üîå",
        category: "tech",
        related: ["Digital Commons", "Meta-Governance"]
      },
      {
        name: "Legitimacy Recognition Systems",
        emoji: "‚öñÔ∏è",
        category: "justice",
        related: ["Cultural Autonomy", "Nested Legitimacy"]
      },
      {
        name: "Meta-Governance",
        emoji: "üåê",
        category: "global",
        related: ["Decentralized Authority", "Integrated Systems Thinking"]
      },
      {
        name: "Nested Legitimacy",
        emoji: "üèõÔ∏è",
        category: "structure",
        related: ["Subsidiarity", "Cultural Autonomy"]
      },
      {
        name: "Participatory Budgeting",
        emoji: "üí∞",
        category: "financial",
        related: ["Direct Participation", "Resource Justice"]
      },
      {
        name: "Reflexive Cycle",
        emoji: "üîç",
        category: "reflection",
        related: ["Adaptive Evolution", "Adaptive Evaluation"]
      },
      {
        name: "Transgenerational KPIs",
        emoji: "‚è≥",
        category: "longterm",
        related: ["Environmental Stewardship", "Cosmic Ethics"]
      },
      {
        name: "Value-Sensitive Design",
        emoji: "‚ù§Ô∏è",
        category: "ethics",
        related: ["Ethical Technology Governance", "Universal Human Rights"]
      },
      {
        name: "Youth-Led Design",
        emoji: "üßí",
        category: "youth",
        related: ["Direct Participation", "Intergenerational Equity"]
      },
      {
        name: "Epistemic Justice",
        emoji: "üß†",
        category: "ethics",
        related: ["Cultural Autonomy", "Indigenous Knowledge Systems", "Pluriversal Governance"]
      },
      {
        name: "Pluriversal Governance",
        emoji: "üåê",
        category: "structure",
        related: ["Cultural Autonomy", "Balance of Integration & Diversity", "Epistemic Justice"]
      },
      {
        name: "Digital Commons",
        emoji: "üíª",
        category: "digital",
        related: ["Resource Justice", "Interoperability APIs", "Decentralized Authority"]
      },
      {
        name: "Non-Linear Decision Protocols",
        emoji: "üîÑ",
        category: "process",
        related: ["Indigenous Knowledge Systems", "Adaptive Evolution", "Pluriversal Governance"]
      },
      {
        name: "Intergenerational Trusteeship",
        emoji: "‚è≥",
        category: "longterm",
        related: ["Transgenerational KPIs", "Environmental Stewardship", "Cosmic Ethics"]
      },
      {
        name: "Governance Sandboxes",
        emoji: "üß™",
        category: "structure",
        related: ["Adaptive Evolution", "Experimental Governance", "Decentralized Authority"]
      },
      {
        name: "Cosmo-Local Production",
        emoji: "üåç",
        category: "financial",
        related: ["Resource Justice", "Cultural Autonomy", "Digital Commons"]
      },
      {
        name: "Polycentric Coordination",
        emoji: "üï∏Ô∏è",
        category: "structure",
        related: ["Meta-Governance", "Decentralized Authority", "Nested Legitimacy"]
      },
      {
        name: "Cosmic Commons",
        emoji: "üöÄ",
        category: "space",
        related: ["Resource Justice", "Cosmic Ethics", "Global Commons"]
      },
      {
        name: "Non-Terrestrial Governance",
        emoji: "üõ∞Ô∏è",
        category: "space",
        related: ["Pluriversal Governance", "Decentralized Authority", "Cosmic Ethics"]
      },
      {
        name: "Consciousness-Informed Governance",
        emoji: "‚ú®",
        category: "spiritual",
        related: ["Value-Sensitive Design", "Epistemic Justice", "Indigenous Knowledge Systems"]
      },
      {
        name: "Contemplative Governance",
        emoji: "üßò",
        category: "spiritual",
        related: ["Reflexive Cycle", "Non-Linear Decision Protocols", "Consciousness-Informed Governance"]
      },
    ],
    sv: [
      {
        name: "Adaptiv Utv√§rdering",
        original: "Adaptive Evaluation",
        emoji: "üîÑ",
        category: "process",
        related: ["Reflexiv Cykel", "Utvecklingsutv√§rdering"]
      },
      {
        name: "Gamifierade √Öterkopplingsloopar",
        original: "Gamified Feedback Loops",
        emoji: "üéÆ",
        category: "digital",
        related: ["Deltagande Budgetering", "Ungdomsledd Design"]
      },
      {
        name: "M√§nniska-i-loopen",
        original: "Human-in-the-Loop",
        emoji: "ü§ñ",
        category: "ai",
        related: ["Etisk AI", "V√§rdek√§nslig Design"]
      },
      {
        name: "Interoperabilitets-API:er",
        original: "Interoperability APIs",
        emoji: "üîå",
        category: "tech",
        related: ["Digitala Allm√§nningar", "Metastyrning"]
      },
      {
        name: "Legitimitetserk√§nnande System",
        original: "Legitimacy Recognition Systems",
        emoji: "‚öñÔ∏è",
        category: "justice",
        related: ["Kulturell Autonomi", "N√§stlad Legitimitet"]
      },
      {
        name: "Metastyrning",
        original: "Meta-Governance",
        emoji: "üåê",
        category: "global",
        related: ["Decentraliserad Auktoritet", "Integrerat Systemt√§nkande"]
      },
      {
        name: "N√§stlad Legitimitet",
        original: "Nested Legitimacy",
        emoji: "üèõÔ∏è",
        category: "structure",
        related: ["Subsidiaritet", "Kulturell Autonomi"]
      },
      {
        name: "Deltagande Budgetering",
        original: "Participatory Budgeting",
        emoji: "üí∞",
        category: "financial",
        related: ["Direkt Deltagande", "Resursr√§ttvisa"]
      },
      {
        name: "Reflexiv Cykel",
        original: "Reflexive Cycle",
        emoji: "üîç",
        category: "reflection",
        related: ["Adaptiv Evolution", "Adaptiv Utv√§rdering"]
      },
      {
        name: "Transgenerationella Nyckeltal",
        original: "Transgenerational KPIs",
        emoji: "‚è≥",
        category: "longterm",
        related: ["Milj√∂f√∂rvaltning", "Kosmisk Etik"]
      },
      {
        name: "V√§rdek√§nslig Design",
        original: "Value-Sensitive Design",
        emoji: "‚ù§Ô∏è",
        category: "ethics",
        related: ["Etisk Teknikstyrning", "Universella M√§nskliga R√§ttigheter"]
      },
      {
        name: "Ungdomsledd Design",
        original: "Youth-Led Design",
        emoji: "üßí",
        category: "youth",
        related: ["Direkt Deltagande", "Intergenerationell R√§ttvisa"]
      },
      {
        name: "Epistemisk R√§ttvisa",
        original: "Epistemic Justice",
        emoji: "üß†",
        category: "ethics",
        related: ["Kulturell Autonomi", "Urfolks Kunskapssystem", "Pluriversell Styrning"]
      },
      {
        name: "Pluriversell Styrning",
        original: "Pluriversal Governance",
        emoji: "üåê",
        category: "structure",
        related: ["Kulturell Autonomi", "Balans av Integration & M√•ngfald", "Epistemisk R√§ttvisa"]
      },
      {
        name: "Digitala Allm√§nningar",
        original: "Digital Commons",
        emoji: "üíª",
        category: "digital",
        related: ["Resursr√§ttvisa", "Interoperabilitets-API:er", "Decentraliserad Auktoritet"]
      },
      {
        name: "Icke-linj√§ra Beslutsprotokoll",
        original: "Non-Linear Decision Protocols",
        emoji: "üîÑ",
        category: "process",
        related: ["Urfolks Kunskapssystem", "Adaptiv Evolution", "Pluriversell Styrning"]
      },
      {
        name: "Intergenerationellt F√∂rvaltarskap",
        original: "Intergenerational Trusteeship",
        emoji: "‚è≥",
        category: "longterm",
        related: ["Transgenerationella Nyckeltal", "Milj√∂f√∂rvaltning", "Kosmisk Etik"]
      },
      {
        name: "Styrningssandl√•dor",
        original: "Governance Sandboxes",
        emoji: "üß™",
        category: "structure",
        related: ["Adaptiv Evolution", "Experimentell Styrning", "Decentraliserad Auktoritet"]
      },
      {
        name: "Kosmo-lokal Produktion",
        original: "Cosmo-Local Production",
        emoji: "üåç",
        category: "financial",
        related: ["Resursr√§ttvisa", "Kulturell Autonomi", "Digitala Allm√§nningar"]
      },
      {
        name: "Polycentrisk Koordinering",
        original: "Polycentric Coordination",
        emoji: "üï∏Ô∏è",
        category: "structure",
        related: ["Metastyrning", "Decentraliserad Auktoritet", "N√§stlad Legitimitet"]
      },
      {
        name: "Kosmiska Allm√§nningar",
        original: "Cosmic Commons",
        emoji: "üöÄ",
        category: "space",
        related: ["Resursr√§ttvisa", "Kosmisk Etik", "Globala Allm√§nningar"]
      },
      {
        name: "Icke-Terrestrisk Styrning",
        original: "Non-Terrestrial Governance",
        emoji: "üõ∞Ô∏è",
        category: "space",
        related: ["Pluriversell Styrning", "Decentraliserad Auktoritet", "Kosmisk Etik"]
      },
      {
        name: "Medvetandebaserad Styrning",
        original: "Consciousness-Informed Governance",
        emoji: "‚ú®",
        category: "spiritual",
        related: ["V√§rdek√§nslig Design", "Epistemisk R√§ttvisa", "Urfolks Kunskapssystem"]
      },
      {
        name: "Kontemplativ Styrning",
        original: "Contemplative Governance",
        emoji: "üßò",
        category: "spiritual",
        related: ["Reflexiv Cykel", "Icke-linj√§ra Beslutsprotokoll", "Medvetandebaserad Styrning"]
      }
      // Add more Swedish terms following the same pattern
    ]
  };
  
  // Get properly sorted and translated terms
  function getProcessedTerms(locale) {
    const currentBaseTerms = baseTerms[locale] || baseTerms.en;
    const currentGlossary = glossaryData[locale] || glossaryData.en;
    
    // Map terms and add translations
    const translatedTerms = currentBaseTerms.map(term => {
      // Use the original English term as the key if available, otherwise use the term name
      const lookupKey = term.original || term.name;
      
      // Retrieve definition and example from the glossary data
      const termData = currentGlossary.terms[lookupKey] || {};
      
      return {
        ...term,
        definition: termData.definition || `Definition not found for ${term.name}`,
        example: termData.example || `Example not found for ${term.name}`
      };
    });
    
    // Sort alphabetically according to current locale
    return [...translatedTerms].sort((a, b) => 
      a.name.localeCompare(b.name, locale)
    );
  }
  
  // Reactive terms based on current locale
  $: terms = getProcessedTerms($locale);
  
  // Get title and intro directly from glossary data
  $: title = glossaryData[$locale]?.title || glossaryData.en.title;
  $: intro = glossaryData[$locale]?.intro || glossaryData.en.intro;
  $: categoriesText = glossaryData[$locale]?.categories || glossaryData.en.categories;
  $: alphabetText = glossaryData[$locale]?.alphabet || glossaryData.en.alphabet;
  $: exampleText = glossaryData[$locale]?.example || glossaryData.en.example;
  $: relatedText = glossaryData[$locale]?.related || glossaryData.en.related;
  $: contributeText = glossaryData[$locale]?.contribute || glossaryData.en.contribute;
  
  // Filter terms based on selected category
  $: filteredTerms = selectedCategory 
    ? terms.filter(term => term.category === selectedCategory) 
    : terms;
    
  // Group terms by first letter for alphabetical navigation
  $: groupedTerms = filteredTerms.reduce((groups, term) => {
    const firstLetter = term.name.charAt(0).toUpperCase();
    if (!groups[firstLetter]) {
      groups[firstLetter] = [];
    }
    groups[firstLetter].push(term);
    return groups;
  }, {});
  
  // Create alphabet for quick navigation
  $: alphabet = Object.keys(groupedTerms).sort();
  
  // Full alphabet for reference (will show disabled letters if no terms start with them)
  const fullAlphabet = $locale === 'sv' 
    ? 'ABCDEFGHIJKLMNOPQRSTUVWXYZ√Ö√Ñ√ñ'.split('') 
    : 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
</script>

<div class="documentation-container">
  <FrameworkSidebar />
  
  <div class="content">
    <h1>{title}</h1>
    
    <p class="intro">
      {intro}
    </p>
    
    <!-- Category filter -->
    <div class="category-section">
      <h2>{categoriesText.title}</h2>
      <div class="category-filter">
        <button class={selectedCategory === null ? 'active' : ''} 
                on:click={() => selectedCategory = null}>
          {categoriesText.all}
        </button>
        
        {#each Object.entries(categories) as [category, emoji]}
          <button class={selectedCategory === category ? 'active' : ''} 
                  on:click={() => selectedCategory = category}
                  title={categoriesText[category] || category}>
            <span class="category-emoji">{emoji}</span>
            <span class="category-text">{categoriesText[category] || category}</span>
          </button>
        {/each}
      </div>
    </div>
    
    <!-- Alphabet quick-jump -->
    <div class="alphabet-section">
      <h2>{alphabetText.title}</h2>
      <div class="alphabet-nav">
        {#each fullAlphabet as letter}
          <a 
            href={`#${letter}`} 
            class="letter-link {!alphabet.includes(letter) ? 'disabled' : ''}"
            aria-disabled={!alphabet.includes(letter)}
          >
            {letter}
          </a>
        {/each}
      </div>
    </div>
    
    <!-- Glossary terms -->
    <div class="glossary-terms">
      {#each alphabet as letter}
        <div class="letter-section" id={letter}>
          <h2 class="letter-heading">{letter}</h2>
          
          {#each groupedTerms[letter] as term}
            <div class="term">
              <h3>{term.name} <span class="term-emoji">{term.emoji}</span></h3>
              <p class="definition">{term.definition}</p>
              
              <details>
                <summary>{exampleText}</summary>
                <p class="example-text">{term.example}</p>
              </details>
              
              {#if term.related.length > 0}
                <p class="related">
                  <strong>{relatedText}:</strong>
                  {#each term.related as related, i}
                    <a href={`#${related}`}>{related}</a>{i < term.related.length - 1 ? ', ' : ''}
                  {/each}
                </p>
              {/if}
            </div>
          {/each}
        </div>
      {/each}
    </div>
    
    <!-- Contribute section -->
    <div class="contribute">
      <h2>{contributeText.title}</h2>
      <p>
        {contributeText.description} 
        <a href="/contact">{contributeText.contact}</a>.
      </p>
    </div>
  </div>
</div>

<style>
  /* The styles remain unchanged */
  .documentation-container {
    display: grid;
    grid-template-columns: 250px 1fr;
    gap: 2rem;
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem 1rem;
  }
  
  @media (max-width: 768px) {
    .documentation-container {
      grid-template-columns: 1fr;
    }
  }
  
  .content {
    min-width: 0;
  }

  .content h1 {
    font-size: 2.5rem;
    font-weight: 700;
    color: #2B4B8C; /* Matches your cosmic-dark color scheme */
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 3px solid #DAA520; /* Gold accent that matches your design */
    display: inline-block;
  }
  
  .intro {
    margin-bottom: 2rem;
    line-height: 1.7;
    color: #4b5563;
  }
  
  .category-section {
    margin-bottom: 2rem;
  }
  
  .category-section h2 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #2B4B8C;
    margin-bottom: 1rem;
  }
  
  .category-filter {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
  }

  .category-filter button {
    padding: 0.5rem 0.75rem;
    border: 1px solid #e5e7eb;
    border-radius: 0.375rem;
    background-color: #f9fafb;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
  }

  .category-filter button.active {
    background-color: #2B4B8C;
    color: white;
    border-color: #2B4B8C;
  }
  
  .category-filter button:hover:not(.active) {
    background-color: #f3f4f6;
    border-color: #d1d5db;
  }
  
  .alphabet-section {
    margin-bottom: 2rem;
  }
  
  .alphabet-section h2 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #2B4B8C;
    margin-bottom: 1rem;
  }
  
  .alphabet-nav {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 2rem;
  }
  
  .alphabet-nav .letter-link {
    width: 2rem;
    height: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    color: #2B4B8C;
    border-radius: 0.25rem;
    background-color: #f9fafb;
    font-weight: 600;
    transition: all 0.2s;
  }
  
  .alphabet-nav .letter-link:hover:not(.disabled) {
    background-color: #2B4B8C;
    color: white;
  }
  
  .alphabet-nav .letter-link.disabled {
    opacity: 0.3;
    cursor: not-allowed;
    pointer-events: none;
  }
  
  .letter-section {
    margin-bottom: 2rem;
    scroll-margin-top: 2rem;
  }
  
  .letter-heading {
    font-size: 1.5rem;
    font-weight: 700;
    color: #DAA520;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #DAA520;
    margin-bottom: 1.5rem;
  }
  
  .term {
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid #e5e7eb;
  }
  
  .term:last-child {
    border-bottom: none;
  }
  
  .term h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #2B4B8C;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
  }
  
  .term-emoji {
    margin-left: 0.5rem;
    font-size: 1.25rem;
  }
  
  .term .definition {
    margin-bottom: 1rem;
    line-height: 1.7;
    color: #4b5563;
  }
  
  .term details {
    margin-bottom: 1rem;
    border-radius: 0.375rem;
    overflow: hidden;
  }
  
  .term details summary {
    cursor: pointer;
    font-weight: 500;
    color: #2B4B8C;
    padding: 0.75rem;
    background-color: #f9fafb;
    border-radius: 0.375rem;
    transition: all 0.2s;
  }
  
  .term details summary:hover {
    background-color: #f3f4f6;
  }
  
  .term details[open] summary {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    border-bottom: 1px solid #e5e7eb;
  }
  
  .term details .example-text {
    padding: 1rem;
    background-color: #f9fafb;
    border-bottom-left-radius: 0.375rem;
    border-bottom-right-radius: 0.375rem;
    margin: 0;
    color: #4b5563;
  }
  
  .term .related {
    font-size: 0.875rem;
    color: #6b7280;
    margin-top: 1rem;
  }
  
  .term .related a {
    color: #2B4B8C;
    text-decoration: none;
    transition: all 0.2s;
  }
  
  .term .related a:hover {
    color: #DAA520;
    text-decoration: underline;
  }
  
  .contribute {
    margin-top: 3rem;
    padding: 1.5rem;
    background-color: #f9fafb;
    border-radius: 0.5rem;
    border-left: 4px solid #DAA520;
  }
  
  .contribute h2 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #2B4B8C;
    margin-bottom: 0.75rem;
  }
  
  @media (max-width: 768px) {
    .category-filter {
      flex-direction: column;
      align-items: stretch;
      max-height: 300px;
      overflow-y: auto;
      padding-right: 0.5rem;
      border: 1px solid #e5e7eb;
      border-radius: 0.375rem;
    }
    
    .category-filter button {
      width: 100%;
      text-align: left;
    }
    
    .alphabet-nav {
      justify-content: center;
    }
  }
</style>
