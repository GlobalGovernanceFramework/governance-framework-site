graph TD
    %% Constitutional Foundation Cluster Map
    %% Generated from GGF Master Schema
    
    subgraph EXT["🔗 Key Dependencies"]
        direction LR
        framework_wdmip["🧭 WDIP"]
    end

    subgraph MAIN["🎯 Constitutional Foundation"]
        direction TB
        framework_treaty["🌐 The Treaty"]
        subgraph INSTITUTION["🏢 Institutions"]
            institution_unsc_reformed["Reformed UNSC"]
            institution_unga_reformed["Reformed UNGA"]
            institution_dj_tribunal["Digital Justice Tribunal"]
            institution_gem["GEM"]
        end
        mechanism_gcf["💰 Global Commons Fund"]
    end

    %% External dependencies
    framework_wdmip -->|"guides"| institution_dj_tribunal

    %% Internal cluster relationships
    framework_treaty -->|"establishes"| institution_dj_tribunal
    framework_treaty -->|"establishes"| institution_gem
    framework_treaty -->|"establishes"| mechanism_gcf
    framework_treaty -->|"establishes"| institution_unsc_reformed
    framework_treaty -->|"establishes"| institution_unga_reformed
    institution_dj_tribunal -->|"enforces"| framework_treaty
    institution_gem -->|"reports to"| institution_dj_tribunal

    %% Entity type styling (with tier colors for frameworks)
    classDef framework fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef council fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef institution fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef mechanism fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef external fill:#fafafa,stroke:#666,stroke-width:1px,stroke-dasharray: 5 5
    
    %% Tier-based colors for frameworks (matching website CSS)
    classDef tier0 fill:#fbbf24,stroke:#d97706,stroke-width:3px,color:#000
    classDef tier1 fill:#60a5fa,stroke:#2563eb,stroke-width:2px,color:#000
    classDef tier2 fill:#34d399,stroke:#059669,stroke-width:2px,color:#000
    classDef tier3 fill:#a78bfa,stroke:#7c3aed,stroke-width:2px,color:#000
    classDef tier4 fill:#f472b6,stroke:#db2777,stroke-width:2px,color:#000
    class framework_treaty tier0
    class institution_unsc_reformed,institution_unga_reformed,institution_dj_tribunal,institution_gem institution
    class mechanism_gcf mechanism
